{% extends "base.html" %}

{% block content %}
    <h1>Dashboard</h1>
    <p>Welcome, {{ current_user.username }}!</p>
    <a href="{{ url_for('main.create_post') }}" class="btn btn-success mb-3">+ New Post</a>

    {% if posts %}
        <div class="list-group">
            {% for post in posts %}
                <div class="post-card">
                    <div class="post-header">
                        <span class="creator">{{ post.author.username }}</span>
                        <span class="visibility">({{ post.visibility.value.capitalize() }})</span>
                    </div>
                    <p>{{ post.content }}</p>

                    <form method="POST" action="{{ url_for('main.like_post', post_id=post.id) }}">
                        <button type="submit" class="btn btn-link p-0">
                            {% if post.is_liked_by(current_user) %}
                                ‚ù§Ô∏è
                            {% else %}
                                ü§ç
                            {% endif %}
                            {{ post.like_count() }} likes
                        </button>
                    </form>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No posts to display.</p>
    {% endif %}
{% endblock %}
